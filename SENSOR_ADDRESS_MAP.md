# æ„Ÿæ¸¬å™¨è³‡æ–™åœ°å€æ˜ å°„è¡¨

## è¨­å‚™è³‡è¨Š

- **IP**: 192.168.2.204
- **Port**: 5020
- **Unit ID**: 1
- **å¯„å­˜å™¨é¡å‹**: Holding Registers (FC03)

## ğŸ“Š æ„Ÿæ¸¬å™¨è³‡æ–™åœ°å€å°æ‡‰è¡¨

æ ¹æ“šæƒæçµæœå’Œ Dashboard é¡¯ç¤ºçš„æ•¸å€¼ï¼Œä»¥ä¸‹æ˜¯ç”¨æ–¼è®€å–æ„Ÿæ¸¬å™¨è³‡æ–™çš„åœ°å€ï¼š

| æ„Ÿæ¸¬å™¨          | Modbus åœ°å€ | Dashboard é¡¯ç¤º | å¯¦éš›è®€å–å€¼ | èªªæ˜                           |
| --------------- | ----------- | -------------- | ---------- | ------------------------------ |
| **PM2.5**       | 0           | 14 Âµg/mÂ³       | 15         | å¯èƒ½éœ€è¦æ¸› 1 æˆ–å››æ¨äº”å…¥        |
| **PM10**        | 1           | 17 Âµg/mÂ³       | 18         | å¯èƒ½éœ€è¦æ¸› 1 æˆ–å››æ¨äº”å…¥        |
| **TVOC**        | 2           | 0.01 ppm       | 10         | éœ€è¦é™¤ä»¥ 1000 (10/1000 = 0.01) |
| **HCHO**        | 3           | 0.00 ppm       | 0          | ç›´æ¥è®€å–                       |
| **Humidity**    | 4           | 40.0 %         | 400        | éœ€è¦é™¤ä»¥ 10 (400/10 = 40.0)    |
| **Temperature** | 5           | 26.0 Â°C        | 260        | éœ€è¦é™¤ä»¥ 10 (260/10 = 26.0)    |
| **CO2**         | 6           | 427 ppm        | 417        | å¯èƒ½æœ‰èª¤å·®æˆ–æ›´æ–°å»¶é²           |

## ğŸ” è®€å–æ–¹å¼

### ä½¿ç”¨ API è®€å–å–®å€‹æ„Ÿæ¸¬å™¨

```bash
# è®€å– PM2.5 (åœ°å€ 0)
GET /api/modbus/holding-registers?address=0&length=1&host=192.168.2.204&port=5020&unitId=1

# è®€å–æ‰€æœ‰æ„Ÿæ¸¬å™¨è³‡æ–™ï¼ˆåœ°å€ 0-6ï¼‰
GET /api/modbus/holding-registers?address=0&length=7&host=192.168.2.204&port=5020&unitId=1
```

### ä½¿ç”¨ cURL ç¯„ä¾‹

```bash
# è®€å– PM2.5
curl "http://localhost:4000/api/modbus/holding-registers?address=0&length=1&host=192.168.2.204&port=5020&unitId=1"

# è®€å–æ‰€æœ‰æ„Ÿæ¸¬å™¨è³‡æ–™
curl "http://localhost:4000/api/modbus/holding-registers?address=0&length=7&host=192.168.2.204&port=5020&unitId=1"
```

### API å›æ‡‰ç¯„ä¾‹

```json
{
	"address": 0,
	"length": 7,
	"data": [15, 18, 10, 0, 400, 260, 417],
	"device": {
		"host": "192.168.2.204",
		"port": 5020,
		"unitId": 1
	}
}
```

## ğŸ“ è³‡æ–™è½‰æ›èªªæ˜

è®€å–åˆ°çš„åŸå§‹å€¼éœ€è¦é€²è¡Œè½‰æ›æ‰èƒ½å¾—åˆ°å¯¦éš›çš„æ„Ÿæ¸¬å™¨æ•¸å€¼ï¼š

1. **PM2.5** (åœ°å€ 0): `å€¼ - 1` æˆ–ç›´æ¥ä½¿ç”¨ï¼ˆå¯èƒ½æœ‰å››æ¨äº”å…¥èª¤å·®ï¼‰
2. **PM10** (åœ°å€ 1): `å€¼ - 1` æˆ–ç›´æ¥ä½¿ç”¨ï¼ˆå¯èƒ½æœ‰å››æ¨äº”å…¥èª¤å·®ï¼‰
3. **TVOC** (åœ°å€ 2): `å€¼ / 1000` â†’ å–®ä½ï¼šppm
4. **HCHO** (åœ°å€ 3): `å€¼` â†’ å–®ä½ï¼šppmï¼ˆç„¡éœ€è½‰æ›ï¼‰
5. **Humidity** (åœ°å€ 4): `å€¼ / 10` â†’ å–®ä½ï¼š%
6. **Temperature** (åœ°å€ 5): `å€¼ / 10` â†’ å–®ä½ï¼šÂ°C
7. **CO2** (åœ°å€ 6): `å€¼` â†’ å–®ä½ï¼šppmï¼ˆå¯èƒ½æœ‰èª¤å·®ï¼‰

## ğŸ’» JavaScript/TypeScript è½‰æ›ç¯„ä¾‹

```javascript
const rawData = [15, 18, 10, 0, 400, 260, 417];

const sensorData = {
	pm25: rawData[0] - 1, // æˆ–ç›´æ¥ä½¿ç”¨ rawData[0]
	pm10: rawData[1] - 1, // æˆ–ç›´æ¥ä½¿ç”¨ rawData[1]
	tvoc: rawData[2] / 1000, // 0.01 ppm
	hcho: rawData[3], // 0.00 ppm
	humidity: rawData[4] / 10, // 40.0 %
	temperature: rawData[5] / 10, // 26.0 Â°C
	co2: rawData[6] // 417 ppm
};
```

## âš ï¸ æ³¨æ„äº‹é …

1. **æ•¸å€¼å¯èƒ½æœ‰èª¤å·®**ï¼šè®€å–åˆ°çš„å€¼å¯èƒ½èˆ‡ Dashboard é¡¯ç¤ºçš„æœ‰è¼•å¾®å·®ç•°ï¼Œé€™æ˜¯æ­£å¸¸çš„ï¼ˆå¯èƒ½ç”±æ–¼æ›´æ–°æ™‚é–“ä¸åŒï¼‰

2. **åœ°å€ç¢ºèª**ï¼šé€™äº›åœ°å€æ˜¯æ ¹æ“šæƒæçµæœæ¨æ¸¬çš„ï¼Œå»ºè­°èˆ‡è¨­å‚™æ–‡ä»¶å°ç…§ç¢ºèª

3. **è³‡æ–™æ›´æ–°é »ç‡**ï¼šModbus è®€å–çš„æ•¸å€¼å¯èƒ½èˆ‡ Dashboard æœ‰æ›´æ–°æ™‚é–“å·®

4. **å–®ä½æ›ç®—**ï¼šæŸäº›æ•¸å€¼éœ€è¦é™¤ä»¥ 10 æˆ– 1000ï¼Œè«‹ç¢ºèªè½‰æ›å…¬å¼
